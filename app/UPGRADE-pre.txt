select "Updating spelling mistakes";

select rdc_id into @concurrentAccessCatId from refdata_category where rdc_description = 'Concurrent Access';
select rdv_id into @notSpecifiedId from refdata_value where rdv_owner = @concurrentAccessCatId and rdv_value = 'Not Specified';
-- delete from license_custom_property  where ref_value_id = @notSpecifiedId and note is null;


select pd_id into @concurrentUsersPropDefId from property_definition where pd_name = 'Concurrent Users';

delete from license_custom_property where type_id = @concurrentUsersPropDefId and owner_id in (select owners.id from( select owner_id as id from license_custom_property where type_id = @concurrentUsersPropDefId ) as owners) and int_value = 0;


UPDATE license SET date_created=now() where date_created=0;
UPDATE license SET last_updated=NULL where last_updated=0;
UPDATE subscription SET date_created=now() where last_updated=0;
UPDATE subscription SET last_updated=NULL where last_updated=0;

select "Update old change notification links to point to www.kbplus.ac.uk, took 100sec locally"
update pending_change set pc_desc = replace(pc_desc, 'service.kbplus.ac.uk', 'www.kbplus.ac.uk');

-- worried about this on live... won't it create duplicates?
UPDATE identifier_namespace SET idns_ns = lower(idns_ns)
